---
page_title: "opal_resource Resource - terraform-provider-opal"
subcategory: ""
description: |-
  An Opal Resource resource.
---

# opal_resource (Resource)

An Opal Resource resource.

## Example Usage

```terraform
resource "opal_resource" "sensitive_resource" {
  name = "Sensitive Resource"
  description = "A sensitive resource."
  resource_type = "CUSTOM"
  app_id = data.opal_app.my_custom_app.id
  admin_owner_id = opal_owner.security.id
  require_mfa_to_approve = true
  auto_approval = false
  require_manager_approval = true

  reviewer {
    id = opal_owner.security.id
  }
}
```

## Remote Resources
Remote resources can be managed using the `remote_info` attribute. See the examples below:

```terraform
resource "opal_resource" "aws_iam_role_example" {
  name = "AWS IAM role"
  description = "AWS IAM role created via terraform"
  resource_type = "AWS_IAM_ROLE"
  app_id = data.opal_app.aws.id
  admin_owner_id = opal_owner.security.id

  remote_info {
    aws_iam_role {
      # Note: This can reference your AWS terraform files
      arn = "arn:aws:iam::2582003"
    }
  }
}

resource "opal_resource" "okta_app_example" {
  name = "Okta app"
  // ...

  remote_info {
    okta_app {
      # Note: This can reference your Okta terraform files
      app_id = "0oa2aa0fcje6E2kXC5d7"
    }
  }
}

resource "opal_resource" "github_repo_example" {
  name = "GitHub repo"
  // ...

  remote_info {
    github_repo {
      # Note: This can reference your GitHub terraform files
      repo_name = "my-repo"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `admin_owner_id` (String) The admin owner ID for this resource.
- `app_id` (String) The ID of the app integration that provides the resource. You can get this value from the URL of the app in the Opal web app.
- `name` (String) The name of the resource.
- `resource_type` (String) The type of the resource, i.e. AWS_EC2_INSTANCE.

### Optional

- `auto_approval` (Boolean) Automatically approve all requests for this resource without review.
- `description` (String) The description of the resource.
- `max_duration` (Number) The maximum duration for which this resource can be requested (in minutes). By default, the max duration is indefinite access.
- `remote_info` (Block List, Max: 1) Remote info that is required for the creation of remote resources. (see [below for nested schema](#nestedblock--remote_info))
- `request_template_id` (String) The ID of a request template for this resource. You can get this ID from the URL in the Opal web app.
- `require_manager_approval` (Boolean) Require the requester's manager's approval for requests to this resource.
- `require_mfa_to_approve` (Boolean) Require that reviewers MFA to approve requests for this resource.
- `require_mfa_to_connect` (Boolean) Require that users MFA to connect to this resource. Only applicable for resources where a session can be started from Opal (i.e. AWS RDS database)
- `require_support_ticket` (Boolean) Require that requesters attach a support ticket to requests for this resource.
- `reviewer` (Block Set) A required reviewer for this resource. If none are specified, then the admin owner will be used. (see [below for nested schema](#nestedblock--reviewer))
- `visibility` (String) The visibility level of the resource, i.e. LIMITED or GLOBAL.
- `visibility_group` (Block List) The groups that can see this resource when visibility is limited. If not specified, only admins and users with direct access can see this resource when visibility is set to LIMITED. (see [below for nested schema](#nestedblock--visibility_group))

### Read-Only

- `id` (String) The ID of the resource.

<a id="nestedblock--remote_info"></a>
### Nested Schema for `remote_info`

Optional:

- `aws_ec2_instance` (Block List, Max: 1) The remote_info for an AWS EC2 instance. (see [below for nested schema](#nestedblock--remote_info--aws_ec2_instance))
- `aws_eks_cluster` (Block List, Max: 1) The remote_info for an AWS EKS cluster. (see [below for nested schema](#nestedblock--remote_info--aws_eks_cluster))
- `aws_iam_role` (Block List, Max: 1) The remote_info for an AWS IAM role. (see [below for nested schema](#nestedblock--remote_info--aws_iam_role))
- `aws_rds_instance` (Block List, Max: 1) The remote_info for an AWS RDS instance. (see [below for nested schema](#nestedblock--remote_info--aws_rds_instance))
- `github_repo` (Block List, Max: 1) The remote_info for a Github repo. (see [below for nested schema](#nestedblock--remote_info--github_repo))
- `okta_app` (Block List, Max: 1) The remote_info for an Okta app. (see [below for nested schema](#nestedblock--remote_info--okta_app))
- `okta_custom_role` (Block List, Max: 1) The remote_info for an Okta custom role. (see [below for nested schema](#nestedblock--remote_info--okta_custom_role))
- `okta_standard_role` (Block List, Max: 1) The remote_info for an Okta standard role. (see [below for nested schema](#nestedblock--remote_info--okta_standard_role))

<a id="nestedblock--remote_info--aws_ec2_instance"></a>
### Nested Schema for `remote_info.aws_ec2_instance`

Required:

- `instance_id` (String) The instanceId of the EC2 instance.
- `region` (String) The region of the EC2 instance.


<a id="nestedblock--remote_info--aws_eks_cluster"></a>
### Nested Schema for `remote_info.aws_eks_cluster`

Required:

- `arn` (String) The ARN of the EKS cluster.


<a id="nestedblock--remote_info--aws_iam_role"></a>
### Nested Schema for `remote_info.aws_iam_role`

Required:

- `arn` (String) The ARN of the IAM role.


<a id="nestedblock--remote_info--aws_rds_instance"></a>
### Nested Schema for `remote_info.aws_rds_instance`

Required:

- `instance_id` (String) The instanceId of the RDS instance.
- `region` (String) The region of the RDS instance.
- `resource_id` (String) The resourceId of the RDS instance.


<a id="nestedblock--remote_info--github_repo"></a>
### Nested Schema for `remote_info.github_repo`

Required:

- `repo_name` (String) The name of the repository.


<a id="nestedblock--remote_info--okta_app"></a>
### Nested Schema for `remote_info.okta_app`

Required:

- `app_id` (String) The id of the app.


<a id="nestedblock--remote_info--okta_custom_role"></a>
### Nested Schema for `remote_info.okta_custom_role`

Required:

- `role_id` (String) The id of the role.


<a id="nestedblock--remote_info--okta_standard_role"></a>
### Nested Schema for `remote_info.okta_standard_role`

Required:

- `role_type` (String) The type of the role.



<a id="nestedblock--reviewer"></a>
### Nested Schema for `reviewer`

Required:

- `id` (String) The ID of the owner that must review requests to this resource.


<a id="nestedblock--visibility_group"></a>
### Nested Schema for `visibility_group`

Required:

- `id` (String) The ID of the group that can see this resource.

Please [file a ticket](https://github.com/opalsecurity/terraform-provider-opal/issues) to discuss use cases that are not yet supported in the provider.
